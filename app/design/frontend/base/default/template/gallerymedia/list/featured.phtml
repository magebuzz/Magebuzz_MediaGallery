<?php/** * @category  Magebuzz * @package   Magebuzz_Gallerymedia * @version   0.1.6 * @copyright Copyright (c) 2012-2015 http://www.magebuzz.com * @license   http://www.magebuzz.com/terms-conditions/ * @var $this Magebuzz_Gallerymedia_Block_List */?><script type="text/javascript">  $popup(document).ready(function () {    $popup(".venture_spring_popup").fancybox();  });</script><?php $_galleryHelper = Mage::helper('gallerymedia'); ?><?php $featuredCollection = $this->getFeaturedItems(); ?><?php $boxSizeConfig = Mage::getStoreConfig('gallerymedia/media_setting/media_box_size'); ?><?php $boxSize = $_galleryHelper->getConfigSize($boxSizeConfig); ?><?php $_columnCount = 4; ?><?php if ($featuredCollection->getSize()): ?>  <div class="featured-media">    <h2 class="box-title"><?php echo Mage::helper('gallerymedia')->__('Featured Media') ?></h2>    <div class="featured-items">      <?php $i = 0;      foreach ($featuredCollection as $_item): ?>        <?php if ($i++ % $_columnCount == 0): ?>          <ul class="media-grid">        <?php endif ?>        <?php $filename = $_item->getItemFile(); ?>        <?php $videoURL = $_item->getVideoUrl(); ?>        <?php $videoId = $_galleryHelper->getYouTubeIdFromURL($videoURL); ?>        <li          class="<?php if ($_item->getMediaType() == '2'): ?>video<?php else: ?>photo<?php endif; ?><?php if (($i - 1) % $_columnCount == 0): ?> first<?php elseif ($i % $_columnCount == 0): ?> last<?php endif; ?>">          <div class="media-info">            <div class="name" style="width:<?php echo $boxSize[0] ?>px">              <a href="<?php echo $this->getItemUrl($_item->getGalleryItemId()) ?>"                 title="<?php echo $_item->getItemName(); ?>">                <span><?php echo $_item->getItemName(); ?></span>              </a>              <div class="clear"></div>              <?php if ($_galleryHelper->showUpdateDate()): ?>                <?php $updateTime = new DateTime($_item->getUpdatedTime()); ?>                <span class="updateTime"><?php echo date_format($updateTime, "F j, Y") ?></span>              <?php endif; ?>              <?php if ($_galleryHelper->getReviewCount($_item->getGalleryItemId()) > 0): ?>                <div class="ratings">                  <div class="rating-box">                    <div                      style="width:<?php echo Mage::helper('gallerymedia')->getRatingSummary($_item->getGalleryItemId()) ?>%"                      class="rating"></div>                  </div>                </div>              <?php endif ?>            </div>            <?php if ($_item->getMediaType() == '2'): ?>              <?php if ($_galleryHelper->isPreviewVideo()): ?>                <div id="popup_video_<?php echo $_item->getId(); ?>" style="display:none;">                  <div id="popup_container_<?php echo $_item->getId(); ?>"                       style="display: none;">Loading the player ...</div>                  <script type="text/javascript">                    jwplayer("popup_container_<?php echo $_item->getId(); ?>").setup({                      flashplayer: "<?php echo $this->getJsUrl('magebuzz/gallerymedia/player.swf')?>",                      file: "<?php if($videoURL != ''):?>http://www.youtube.com/watch?v=<?php echo $videoId?><?php else:?><?php echo Mage::getBaseUrl('media')."gallerymedia/mediafile/".$filename?><?php endif;?>",                      controlbar: "over",                      height: 320,                      width: 400                    });                  </script>                </div>                <div class="video-thumbnail" <?php if ($this->getSizeHtml()) {                  echo $this->getSizeHtml();                } else {                  echo 'style="width:200px;height:200px;"';                } ?>>                  <p <?php if ($this->getSizeHtml()) {                    echo $this->getSizeHtml();                  } else {                    echo 'style="width:200px;height:200px;"';                  } ?>>                    <a class="venture_spring_popup" data-fancybox-group="gallery"                       href="#popup_video_<?php echo $_item->getId(); ?>"                       title="<?php echo $_item->getItemName(); ?>">                      <?php                      $video_thumbnail = Mage::helper("gallerymedia/image")->init($_item)->resize($_item['media_thumbnail'], $boxSize[0], $boxSize[1], 'thumbnail');                      ?>                      <img src="<?php echo $video_thumbnail; ?>"                           title="<?php echo $_item->getItemName(); ?>"                           alt="<?php echo $_item->getItemName(); ?>" align="left"/>                    </a>                  </p>                </div>                <div class="icon"><img                    src="<?php echo $this->getSkinUrl('magebuzz/gallerymedia/images/video_icon.png') ?>"/>                </div>              <?php else: ?>                <div class="video-thumbnail" <?php if ($this->getSizeHtml()) {                  echo $this->getSizeHtml();                } else {                  echo 'style="width:200px;height:200px;"';                } ?>>                  <p <?php if ($this->getSizeHtml()) {                    echo $this->getSizeHtml();                  } else {                    echo 'style="width:200px;height:200px;"';                  } ?>>                    <a class="venture_spring_popup" data-fancybox-group="gallery"                       href="<?php echo $this->getItemUrl($_item->getGalleryItemId()) ?>"                       title="<?php echo $_item->getItemName(); ?>">                      <?php                      $video_thumbnail = Mage::helper("gallerymedia/image")->init($_item)->resize($_item['media_thumbnail'], $boxSize[0], $boxSize[1], 'thumbnail');                      ?>                      <img src="<?php echo $video_thumbnail; ?>"                           title="<?php echo $_item->getItemName(); ?>"                           alt="<?php echo $_item->getItemName(); ?>" align="left"/>                    </a>                  </p>                </div>                <div class="icon"><img                    src="<?php echo $this->getSkinUrl('magebuzz/gallerymedia/images/video_icon.png') ?>"/>                </div>              <?php endif; ?>            <?php else: ?>              <div class="media-photo" <?php if ($this->getSizeHtml()) {                echo $this->getSizeHtml();              } else {                echo 'style="width:200px;height:200px;"';              } ?>>                <p <?php if ($this->getSizeHtml()) {                  echo $this->getSizeHtml();                } else {                  echo 'style="width:200px;height:200px;"';                } ?>>                  <?php $imageUrlInit = Mage::helper("gallerymedia/image")->getImageUrl($_item->getItemFile()); ?>                  <a class="venture_spring_popup" data-fancybox-group="gallery"                     href="<?php echo $imageUrlInit; ?>" title="<?php echo $_item->getItemName(); ?>">                    <?php                    $image_url = Mage::helper("gallerymedia/image")->init($_item)->resize($_item['item_file'], $boxSize[0], $boxSize[1]);                    ?>                    <img src="<?php echo $image_url; ?>"                         title="<?php echo $_item->getItemName(); ?>"                         alt="<?php echo $_item->getItemName(); ?>" align="left"/>                  </a>                </p>              </div>              <div class="icon"><img                  src="<?php echo $this->getSkinUrl('magebuzz/gallerymedia/images/photo_icon.png') ?>"/></div>            <?php endif; ?>          </div>        </li>        <?php if ($i % $_columnCount == 0 || $i == count($featuredCollection)): ?>          </ul>        <?php endif ?>      <?php endforeach; ?>    </div>  </div><?php endif; ?>	